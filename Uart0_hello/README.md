# Uart0_hello

## Overview

This is from

https://github.com/MicrochipTech/TB3216_Getting_Started_with_USART


## Bleeding Edge Problems

Yes.

For VScode see its .vscode JSON files.

For GCC you need to understand how it does the Search-Path

https://gcc.gnu.org/onlinedocs/cpp/Search-Path.html

Options

https://gcc.gnu.org/onlinedocs/gcc/Option-Summary.html

for Directory Search (e.g.,  -B -I)

https://gcc.gnu.org/onlinedocs/gcc/Directory-Options.html#Directory-Options

Look in the Makefile to see how I used them.


## OMG it uploaded

```
make updi
avr-gcc -Os -g -std=gnu99 -Wall -ffunction-sections -fdata-sections  -DF_CPU=2000000UL/6 -I.  -mmcu=avr128da28 -B ../lib/AVR-Dx_DFP/gcc/dev/avr128da28/ -I ../lib/AVR-Dx_DFP/include/ -c -o main.o main.c
avr-gcc -Wl,-Map,Uart0_hello.map  -Wl,--gc-sections  -mmcu=avr128da28 -B ../lib/AVR-Dx_DFP/gcc/dev/avr128da28/ -I ../lib/AVR-Dx_DFP/include/ main.o -o Uart0_hello.elf
avr-size Uart0_hello.elf
   text    data     bss     dec     hex filename
    360      16       0     376     178 Uart0_hello.elf
rm -f Uart0_hello.o main.o 
avr-objcopy -j .text -j .data -O ihex Uart0_hello.elf Uart0_hello.hex
testing for prerequesetits a false will stop make
which python3 2>/dev/null || false
/usr/bin/python3
which pyupdi 2>/dev/null || false
/home/rsutherland/.local/bin/pyupdi
ls ../../RPUusb/BCM24cntl/UPDImode.py 2>/dev/null || false
../../RPUusb/BCM24cntl/UPDImode.py
ls ../../RPUusb/BCM24cntl/UARTmode.py 2>/dev/null || false
../../RPUusb/BCM24cntl/UARTmode.py
python3 ../../RPUusb/BCM24cntl/UPDImode.py
cmd echo: /0/updi
response: {"PiUPDI":"UPDI"}
pyupdi -v -d avr128da28 -c /dev/ttyUSB0 -b 115200 -e -f Uart0_hello.hex
INFO:phy Opening /dev/ttyUSB0 at 115200 baud
INFO:phy send 1 bytes
INFO:phy data:  : [0x0]
INFO:link STCS 0x08 to 0x03
INFO:phy send 3 bytes
INFO:phy data:  : [0x55, 0xc3, 0x8]
INFO:link STCS 0x80 to 0x02
INFO:phy send 3 bytes
INFO:phy data:  : [0x55, 0xc2, 0x80]
INFO:link LDCS from 0x00
INFO:phy send 2 bytes
INFO:phy data:  : [0x55, 0x80]
INFO:phy receive : [0x30]
INFO:link UPDI init OK
INFO:nvm Reading device info
INFO:phy send 2 bytes
INFO:phy data:  : [0x55, 0xe5]
INFO:app SIB read out as: bytearray(b'    AVR P:2D:1-3')
INFO:app Device family ID: 'AVR'
INFO:app NVM interface: 'P:2'
INFO:app Using PDI v2
INFO:link Using 24-bit updi
INFO:app Debug interface: 'D:1'
INFO:app PDI oscillator: '3MHz'
INFO:link LDCS from 0x00
INFO:phy send 2 bytes
INFO:phy data:  : [0x55, 0x80]
INFO:phy receive : [0x30]
INFO:app PDI revision = 0x3
INFO:link LDCS from 0x0B
INFO:phy send 2 bytes
INFO:phy data:  : [0x55, 0x8b]
INFO:phy receive : [0x82]
INFO:nvm Entering NVM programming mode
INFO:link LDCS from 0x0B
INFO:phy send 2 bytes
INFO:phy data:  : [0x55, 0x8b]
INFO:phy receive : [0x82]
INFO:app Entering NVM programming mode
INFO:link Writing key
INFO:phy send 2 bytes
INFO:phy data:  : [0x55, 0xe0]
INFO:phy send 8 bytes
INFO:phy data:  : [0x20, 0x67, 0x6f, 0x72, 0x50, 0x4d, 0x56, 0x4e]
INFO:link LDCS from 0x07
INFO:phy send 2 bytes
INFO:phy data:  : [0x55, 0x87]
INFO:phy receive : [0x10]
INFO:app Key status = 0x10
INFO:app Apply reset
INFO:link STCS 0x59 to 0x08
INFO:phy send 3 bytes
INFO:phy data:  : [0x55, 0xc8, 0x59]
INFO:app Check reset
INFO:link LDCS from 0x0B
INFO:phy send 2 bytes
INFO:phy data:  : [0x55, 0x8b]
INFO:phy receive : [0xa2]
INFO:app Release reset
INFO:link STCS 0x00 to 0x08
INFO:phy send 3 bytes
INFO:phy data:  : [0x55, 0xc8, 0x0]
INFO:app Wait for !reset
INFO:link LDCS from 0x0B
INFO:phy send 2 bytes
INFO:phy data:  : [0x55, 0x8b]
INFO:phy receive : [0x28]
INFO:app Wait for !reset
INFO:link LDCS from 0x0B
INFO:phy send 2 bytes
INFO:phy data:  : [0x55, 0x8b]
INFO:phy receive : [0x8]
INFO:app Wait for NVMPROG
INFO:link LDCS from 0x0B
INFO:phy send 2 bytes
INFO:phy data:  : [0x55, 0x8b]
INFO:phy receive : [0x8]
INFO:link LDCS from 0x0B
INFO:phy send 2 bytes
INFO:phy data:  : [0x55, 0x8b]
INFO:phy receive : [0x8]
INFO:app Now in NVM programming mode
INFO:nvm Reading device info
INFO:phy send 2 bytes
INFO:phy data:  : [0x55, 0xe5]
INFO:app SIB read out as: bytearray(b'    AVR P:2D:1-3')
INFO:app Device family ID: 'AVR'
INFO:app NVM interface: 'P:2'
INFO:app Using PDI v2
INFO:link Using 24-bit updi
INFO:app Debug interface: 'D:1'
INFO:app PDI oscillator: '3MHz'
INFO:link LDCS from 0x00
INFO:phy send 2 bytes
INFO:phy data:  : [0x55, 0x80]
INFO:phy receive : [0x30]
INFO:app PDI revision = 0x3
INFO:link LDCS from 0x0B
INFO:phy send 2 bytes
INFO:phy data:  : [0x55, 0x8b]
INFO:phy receive : [0x8]
INFO:app Reading 3 bytes from 0x1100
INFO:link ST to ptr
INFO:phy send 5 bytes
INFO:phy data:  : [0x55, 0x6a, 0x0, 0x11, 0x0]
INFO:phy receive : [0x40]
INFO:link Repeat 3
INFO:phy send 3 bytes
INFO:phy data:  : [0x55, 0xa0, 0x2]
INFO:link LD8 from ptr++
INFO:phy send 2 bytes
INFO:phy data:  : [0x55, 0x24]
INFO:phy receive : [0x1e, 0x97, 0xa]
INFO:app Device ID = '1E970A'
INFO:app Reading 1 bytes from 0x0F01
INFO:link ST to ptr
INFO:phy send 5 bytes
INFO:phy data:  : [0x55, 0x6a, 0x1, 0xf, 0x0]
INFO:phy receive : [0x40]
INFO:link LD8 from ptr++
INFO:phy send 2 bytes
INFO:phy data:  : [0x55, 0x24]
INFO:phy receive : [0x17]
INFO:app Device rev = '1.7'
Device info: {'family': 'AVR', 'nvm': 'P:2', 'ocd': 'D:1', 'osc': '3', 'device_id': '1E970A', 'device_rev': '1.7'}
INFO:app Chip erase using NVM CTRL
INFO:app Wait flash ready
INFO:link LD from 0x001002
INFO:phy send 5 bytes
INFO:phy data:  : [0x55, 0x8, 0x2, 0x10, 0x0]
INFO:phy receive : [0x0]
INFO:app NVMCMD 32 executing
INFO:link ST to 0x001000
INFO:phy send 5 bytes
INFO:phy data:  : [0x55, 0x48, 0x0, 0x10, 0x0]
INFO:phy receive : [0x40]
INFO:phy send 1 bytes
INFO:phy data:  : [0x20]
INFO:phy receive : [0x40]
INFO:app Wait flash ready
INFO:link LD from 0x001002
INFO:phy send 5 bytes
INFO:phy data:  : [0x55, 0x8, 0x2, 0x10, 0x0]
INFO:phy receive : [0x3]
INFO:link LD from 0x001002
INFO:phy send 5 bytes
INFO:phy data:  : [0x55, 0x8, 0x2, 0x10, 0x0]
INFO:phy receive : [0x3]
INFO:link LD from 0x001002
INFO:phy send 5 bytes
INFO:phy data:  : [0x55, 0x8, 0x2, 0x10, 0x0]
INFO:phy receive : [0x0]
INFO:nvm Loading from hexfile 'Uart0_hello.hex'
INFO:nvm Loaded 376 bytes from ihex starting at address 0x0000
INFO:nvm Adjusting flash offset to address 0x800000
INFO:app Chip erase using NVM CTRL
INFO:app Wait flash ready
INFO:link LD from 0x001002
INFO:phy send 5 bytes
INFO:phy data:  : [0x55, 0x8, 0x2, 0x10, 0x0]
INFO:phy receive : [0x0]
INFO:app NVMCMD 32 executing
INFO:link ST to 0x001000
INFO:phy send 5 bytes
INFO:phy data:  : [0x55, 0x48, 0x0, 0x10, 0x0]
INFO:phy receive : [0x40]
INFO:phy send 1 bytes
INFO:phy data:  : [0x20]
INFO:phy receive : [0x40]
INFO:app Wait flash ready
INFO:link LD from 0x001002
INFO:phy send 5 bytes
INFO:phy data:  : [0x55, 0x8, 0x2, 0x10, 0x0]
INFO:phy receive : [0x3]
INFO:link LD from 0x001002
INFO:phy send 5 bytes
INFO:phy data:  : [0x55, 0x8, 0x2, 0x10, 0x0]
INFO:phy receive : [0x3]
INFO:link LD from 0x001002
INFO:phy send 5 bytes
INFO:phy data:  : [0x55, 0x8, 0x2, 0x10, 0x0]
INFO:phy receive : [0x0]
INFO:nvm Padding to blocksize 256 with 0xFF
INFO:nvm Paging into 256 byte blocks
INFO:nvm Writing page at 0x800000
INFO:app Wait flash ready
INFO:link LD from 0x001002
INFO:phy send 5 bytes
INFO:phy data:  : [0x55, 0x8, 0x2, 0x10, 0x0]
INFO:phy receive : [0x0]
INFO:app NVM write command
INFO:app NVMCMD 2 executing
INFO:link ST to 0x001000
INFO:phy send 5 bytes
INFO:phy data:  : [0x55, 0x48, 0x0, 0x10, 0x0]
INFO:phy receive : [0x40]
INFO:phy send 1 bytes
INFO:phy data:  : [0x2]
INFO:phy receive : [0x40]
INFO:link ST to ptr
INFO:phy send 5 bytes
INFO:phy data:  : [0x55, 0x6a, 0x0, 0x0, 0x80]
INFO:phy receive : [0x40]
INFO:link Repeat 128
INFO:phy send 3 bytes
INFO:phy data:  : [0x55, 0xa0, 0x7f]
INFO:link ST16 to *ptr++
INFO:link STCS 0x88 to 0x02
INFO:phy send 3 bytes
INFO:phy data:  : [0x55, 0xc2, 0x88]
INFO:phy send 2 bytes
INFO:phy data:  : [0x55, 0x65]
INFO:phy send 256 bytes
INFO:phy data:  : [0xc, 0x94, 0x52, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0x11, 0x24, 0x1f, 0xbe, 0xcf, 0xef, 0xcd, 0xbf, 0xdf, 0xe7, 0xde, 0xbf, 0x10, 0xe4, 0xa0, 0xe0, 0xb0, 0xe4, 0xe8, 0xe6, 0xf1, 0xe0, 0x0, 0xe0, 0xb, 0xbf, 0x2, 0xc0, 0x7, 0x90, 0xd, 0x92, 0xa0, 0x31, 0xb1, 0x7, 0xd9, 0xf7, 0xe, 0x94, 0xa2, 0x0, 0xc, 0x94, 0xb2, 0x0, 0xc, 0x94, 0x0, 0x0, 0xe0, 0xe0, 0xf4, 0xe0, 0x80, 0x81, 0x8d, 0x7f, 0x80, 0x83, 0x80, 0x81, 0x81, 0x60, 0x80, 0x83, 0xe0, 0xe0, 0xf8, 0xe0, 0x83, 0xe2, 0x90, 0xe0, 0x80, 0x87, 0x91, 0x87, 0x86, 0x81, 0x80, 0x64, 0x86, 0x83, 0x8, 0x95, 0x90, 0x91, 0x4, 0x8, 0x95, 0xff]
INFO:link STCS 0x80 to 0x02
INFO:phy send 3 bytes
INFO:phy data:  : [0x55, 0xc2, 0x80]
INFO:app Wait flash ready
INFO:link LD from 0x001002
INFO:phy send 5 bytes
INFO:phy data:  : [0x55, 0x8, 0x2, 0x10, 0x0]
INFO:phy receive : [0x0]
INFO:app Clear NVM command
INFO:app NVMCMD 0 executing
INFO:link ST to 0x001000
INFO:phy send 5 bytes
INFO:phy data:  : [0x55, 0x48, 0x0, 0x10, 0x0]
INFO:phy receive : [0x40]
INFO:phy send 1 bytes
INFO:phy data:  : [0x0]
INFO:phy receive : [0x40]
INFO:nvm Writing page at 0x800100
INFO:app Wait flash ready
INFO:link LD from 0x001002
INFO:phy send 5 bytes
INFO:phy data:  : [0x55, 0x8, 0x2, 0x10, 0x0]
INFO:phy receive : [0x0]
INFO:app NVM write command
INFO:app NVMCMD 2 executing
INFO:link ST to 0x001000
INFO:phy send 5 bytes
INFO:phy data:  : [0x55, 0x48, 0x0, 0x10, 0x0]
INFO:phy receive : [0x40]
INFO:phy send 1 bytes
INFO:phy data:  : [0x2]
INFO:phy receive : [0x40]
INFO:link ST to ptr
INFO:phy send 5 bytes
INFO:phy data:  : [0x55, 0x6a, 0x0, 0x1, 0x80]
INFO:phy receive : [0x40]
INFO:link Repeat 128
INFO:phy send 3 bytes
INFO:phy data:  : [0x55, 0xa0, 0x7f]
INFO:link ST16 to *ptr++
INFO:link STCS 0x88 to 0x02
INFO:phy send 3 bytes
INFO:phy data:  : [0x55, 0xc2, 0x88]
INFO:phy send 2 bytes
INFO:phy data:  : [0x55, 0x65]
INFO:phy send 256 bytes
INFO:phy data:  : [0xfc, 0xcf, 0x80, 0x93, 0x2, 0x8, 0x8, 0x95, 0xf, 0x93, 0x1f, 0x93, 0xcf, 0x93, 0xdf, 0x93, 0xec, 0x1, 0x8c, 0x1, 0xfe, 0x1, 0x1, 0x90, 0x0, 0x20, 0xe9, 0xf7, 0x31, 0x97, 0xec, 0x1b, 0xfd, 0xb, 0xc8, 0x1, 0x8c, 0x1b, 0x9d, 0xb, 0x8e, 0x17, 0x9f, 0x7, 0x30, 0xf4, 0xf8, 0x1, 0x81, 0x91, 0x8f, 0x1, 0xe, 0x94, 0x7d, 0x0, 0xed, 0xcf, 0xdf, 0x91, 0xcf, 0x91, 0x1f, 0x91, 0xf, 0x91, 0x8, 0x95, 0xe, 0x94, 0x6b, 0x0, 0x80, 0xe0, 0x90, 0xe4, 0xe, 0x94, 0x84, 0x0, 0x24, 0xe1, 0x86, 0xe1, 0x95, 0xe0, 0x21, 0x50, 0x80, 0x40, 0x90, 0x40, 0xe1, 0xf7, 0x0, 0xc0, 0x0, 0x0, 0xf2, 0xcf, 0xf8, 0x94, 0xff, 0xcf, 0x48, 0x65, 0x6c, 0x6c, 0x6f, 0x20, 0x57, 0x6f, 0x72, 0x6c, 0x64, 0x21, 0xd, 0xa, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0]
INFO:link STCS 0x80 to 0x02
INFO:phy send 3 bytes
INFO:phy data:  : [0x55, 0xc2, 0x80]
INFO:app Wait flash ready
INFO:link LD from 0x001002
INFO:phy send 5 bytes
INFO:phy data:  : [0x55, 0x8, 0x2, 0x10, 0x0]
INFO:phy receive : [0x0]
INFO:app Clear NVM command
INFO:app NVMCMD 0 executing
INFO:link ST to 0x001000
INFO:phy send 5 bytes
INFO:phy data:  : [0x55, 0x48, 0x0, 0x10, 0x0]
INFO:phy receive : [0x40]
INFO:phy send 1 bytes
INFO:phy data:  : [0x0]
INFO:phy receive : [0x40]
INFO:nvm Reading page at 0x800000
INFO:app Reading 128 words from 0x800000
INFO:link ST to ptr
INFO:phy send 5 bytes
INFO:phy data:  : [0x55, 0x6a, 0x0, 0x0, 0x80]
INFO:phy receive : [0x40]
INFO:link Repeat 128
INFO:phy send 3 bytes
INFO:phy data:  : [0x55, 0xa0, 0x7f]
INFO:link LD16 from ptr++
INFO:phy send 2 bytes
INFO:phy data:  : [0x55, 0x25]
INFO:phy receive : [0xc, 0x94, 0x52, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0xc, 0x94, 0x69, 0x0, 0x11, 0x24, 0x1f, 0xbe, 0xcf, 0xef, 0xcd, 0xbf, 0xdf, 0xe7, 0xde, 0xbf, 0x10, 0xe4, 0xa0, 0xe0, 0xb0, 0xe4, 0xe8, 0xe6, 0xf1, 0xe0, 0x0, 0xe0, 0xb, 0xbf, 0x2, 0xc0, 0x7, 0x90, 0xd, 0x92, 0xa0, 0x31, 0xb1, 0x7, 0xd9, 0xf7, 0xe, 0x94, 0xa2, 0x0, 0xc, 0x94, 0xb2, 0x0, 0xc, 0x94, 0x0, 0x0, 0xe0, 0xe0, 0xf4, 0xe0, 0x80, 0x81, 0x8d, 0x7f, 0x80, 0x83, 0x80, 0x81, 0x81, 0x60, 0x80, 0x83, 0xe0, 0xe0, 0xf8, 0xe0, 0x83, 0xe2, 0x90, 0xe0, 0x80, 0x87, 0x91, 0x87, 0x86, 0x81, 0x80, 0x64, 0x86, 0x83, 0x8, 0x95, 0x90, 0x91, 0x4, 0x8, 0x95, 0xff]
INFO:nvm Reading page at 0x800100
INFO:app Reading 128 words from 0x800100
INFO:link ST to ptr
INFO:phy send 5 bytes
INFO:phy data:  : [0x55, 0x6a, 0x0, 0x1, 0x80]
INFO:phy receive : [0x40]
INFO:link Repeat 128
INFO:phy send 3 bytes
INFO:phy data:  : [0x55, 0xa0, 0x7f]
INFO:link LD16 from ptr++
INFO:phy send 2 bytes
INFO:phy data:  : [0x55, 0x25]
INFO:phy receive : [0xfc, 0xcf, 0x80, 0x93, 0x2, 0x8, 0x8, 0x95, 0xf, 0x93, 0x1f, 0x93, 0xcf, 0x93, 0xdf, 0x93, 0xec, 0x1, 0x8c, 0x1, 0xfe, 0x1, 0x1, 0x90, 0x0, 0x20, 0xe9, 0xf7, 0x31, 0x97, 0xec, 0x1b, 0xfd, 0xb, 0xc8, 0x1, 0x8c, 0x1b, 0x9d, 0xb, 0x8e, 0x17, 0x9f, 0x7, 0x30, 0xf4, 0xf8, 0x1, 0x81, 0x91, 0x8f, 0x1, 0xe, 0x94, 0x7d, 0x0, 0xed, 0xcf, 0xdf, 0x91, 0xcf, 0x91, 0x1f, 0x91, 0xf, 0x91, 0x8, 0x95, 0xe, 0x94, 0x6b, 0x0, 0x80, 0xe0, 0x90, 0xe4, 0xe, 0x94, 0x84, 0x0, 0x24, 0xe1, 0x86, 0xe1, 0x95, 0xe0, 0x21, 0x50, 0x80, 0x40, 0x90, 0x40, 0xe1, 0xf7, 0x0, 0xc0, 0x0, 0x0, 0xf2, 0xcf, 0xf8, 0x94, 0xff, 0xcf, 0x48, 0x65, 0x6c, 0x6c, 0x6f, 0x20, 0x57, 0x6f, 0x72, 0x6c, 0x64, 0x21, 0xd, 0xa, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0]
Programming successful
INFO:nvm Leaving NVM programming mode
INFO:app Leaving NVM programming mode
INFO:app Apply reset
INFO:link STCS 0x59 to 0x08
INFO:phy send 3 bytes
INFO:phy data:  : [0x55, 0xc8, 0x59]
INFO:app Check reset
INFO:link LDCS from 0x0B
INFO:phy send 2 bytes
INFO:phy data:  : [0x55, 0x8b]
INFO:phy receive : [0x28]
INFO:app Release reset
INFO:link STCS 0x00 to 0x08
INFO:phy send 3 bytes
INFO:phy data:  : [0x55, 0xc8, 0x0]
INFO:app Wait for !reset
INFO:link LDCS from 0x0B
INFO:phy send 2 bytes
INFO:phy data:  : [0x55, 0x8b]
INFO:phy receive : [0xa2]
INFO:app Wait for !reset
INFO:link LDCS from 0x0B
INFO:phy send 2 bytes
INFO:phy data:  : [0x55, 0x8b]
INFO:phy receive : [0x82]
INFO:link STCS 0x0C to 0x03
INFO:phy send 3 bytes
INFO:phy data:  : [0x55, 0xc3, 0xc]
INFO:phy Closing port '/dev/ttyUSB0'
python3 ../../RPUusb/BCM24cntl/UARTmode.py
```

Back in UART mode, lets test it.

```
picocom -b 38400 /dev/ttyUSB0
...
Type [C-a] [C-h] to see available commands
Terminal ready
Hello World!
Hello World!
Hello World!
```

Problem if the UPDI interface is left in a bad state (e.g., baud rate error) it has to be power cycled to clear. I guess pyupdi sends two breaks (slow baud rate nulls) after this is found and the next upload can work if the baud rate is corrected (not yet tested).
